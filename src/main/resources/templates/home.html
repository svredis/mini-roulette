<!DOCTYPE html>
<html>

<head>
    <title>Mini roulette</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

    <link rel="stylesheet" type="text/css"
          href="webjars/bootstrap/3.3.7/css/bootstrap.min.css"/>
</head>
<body>

<nav class="navbar navbar-inverse">
    <div class="container">
        <div class="navbar-header">
            <a class="navbar-brand" href="#">Mini roulette</a>
        </div>
    </div>
</nav>

<div class="container" style="min-height: 500px">

    <div class="starter-template">
        <h1>Welcome to the game!</h1>

        <div class="col-sm-10">
            <button id="bth-bet" class="btn btn-primary btn-lg">Bet</button>

        </div>

        <div id="messages"></div>

    </div>

</div>

<script type="text/javascript" src="webjars/jquery/2.2.4/jquery.min.js"></script>

<script>
    $(document).ready(function () {
        $("#bth-bet").click(function () {
            $.get("/api/bet");
        });
        $("#bth-bet").mouseup(function () {
            this.blur()
        });

        const eventSource = new EventSource('http://localhost:8080/api/sse');
        eventSource.onmessage = e => {
            $("#messages").append("<p>" + e.data + "</p>");
            console.log(e.data);
        };

        eventSource.onopen = e => console.log('open');
        eventSource.onerror = e => {
            if (e.readyState === EventSource.CLOSED) {
                console.log('close');
            }
            else {
                console.log(e);
            }
        };

        eventSource.addEventListener('second', function (e) {
            console.log('second', e.data);
        }, false);

    });
</script>

</body>
</html>